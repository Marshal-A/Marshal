create database bookcatalog;
use bookcatalog;

create table categories (
category_id int primary key,
category_name varchar(30) unique not null
);

create table publishers (
publisher_id int primary key,
publisher_name varchar(30) not null
);

create table book(
bookid int primary key,
title varchar(20) not null,
ISBN varchar(10) unique not null,
publication_year int not null,
publisher_id int,
category_id int,
author_name varchar(30) check(author_name is not null),
constraint foreign key (publisher_id) references publishers (publisher_id) on delete cascade,
constraint foreign key (category_id) references  categories (category_id) on delete cascade
);

create table users (
userid int primary key,
user_name varchar(30) not null,
email varchar(40) unique not null,
phone_no varchar(25) unique not null
);

create table borrowings (
borrow_id int primary key,
user_id int,
bookid int,
borrow_date date not null,
return_date date not null,
constraint foreign key (user_id) references  users (userid) on delete cascade,
constraint foreign key (bookid) references book (bookid) on delete cascade
);

insert into categories values (2,'anime');
insert into publishers values (2,'Manga');
insert into book  VALUES(2,'one piece','op301',1995,2,2,'eiichiro oda');
insert into users values(102,'Marshal','mars@gmail.com','8855776634');
insert into borrowings values(202,102,1,'2024-07-07','2024-07-10');

select * from book;
select * from categories;
select * from publishers;
select * from users;
select * from borrowings;

